!function(r,e){var n,t;"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(r=r||self,n=r.isInSubnet,t=r.isInSubnet={},e(t),t.noConflict=function(){return r.isInSubnet=n,t})}(this,function(r){"use strict";function e(){for(var r=0,e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;var t=Array(r),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,u=a.length;o<u;o++,i++)t[i]=a[o];return t}var n="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",t="("+n+"[.]){3}"+n,i=new RegExp("^"+t+"$"),a="(?:[0-9a-fA-F]{1,4})",o=new RegExp("^((?:"+a+":){7}(?:"+a+"|:)|(?:"+a+":){6}(?:"+t+"|:"+a+"|:)|(?:"+a+":){5}(?::"+t+"|(:"+a+"){1,2}|:)|(?:"+a+":){4}(?:(:"+a+"){0,1}:"+t+"|(:"+a+"){1,3}|:)|(?:"+a+":){3}(?:(:"+a+"){0,2}:"+t+"|(:"+a+"){1,4}|:)|(?:"+a+":){2}(?:(:"+a+"){0,3}:"+t+"|(:"+a+"){1,5}|:)|(?:"+a+":){1}(?:(:"+a+"){0,4}:"+t+"|(:"+a+"){1,6}|:)|(?::((?::"+a+"){0,5}:"+t+"|(?::"+a+"){1,7}|:)))(%[0-9a-zA-Z]{1,})?$");function u(r){return i.test(r)}function s(r){return o.test(r)}function v(r){return u(r)?4:s(r)?6:0}var f={localhost:{ipv4:["127.0.0.0/8"],ipv6:["::1/128"]},private:{ipv4:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16"],ipv6:["fe80::/10","fc00::/7"]},reserved:{ipv4:["0.0.0.0/8","100.64.0.0/10","169.254.0.0/16","192.0.0.0/24","192.0.2.0/24","192.88.99.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","224.0.0.0/4","240.0.0.0/4","255.255.255.255/32"],ipv6:["::/128","64:ff9b::/96","100::/64","2001::/32","2001:10::/28","2001:20::/28","2001:db8::/32","2002::/16","ff00::/8"]}};function c(r){if(!u(r))throw new Error("not a valid IPv4 address: "+r);var e=r.split(".");return(parseInt(e[0],10)<<24)+(parseInt(e[1],10)<<16)+(parseInt(e[2],10)<<8)+parseInt(e[3],10)>>>0}function p(r){if(Array.isArray(r)){var n=r.map(function(r){return l(r)});return function(r){var e=c(r);return n.some(function(r){return r(e)})}}var t=l(r);return function(r){var e=c(r);return t(e)}}function l(r){var e=r.split("/"),n=e[0],t=e[1],i=parseInt(t,10);if(!n||!Number.isInteger(i))throw new Error("not a valid IPv4 subnet: "+r);if(i<0||32<i)throw new Error("not a valid IPv4 prefix length: "+i+" (from "+r+")");var a=c(n);return function(r){return 0===i||a>>32-i==r>>32-i}}var d={};function h(r){return"private"in d==!1&&(d.private=p(f.private.ipv4)),d.private(r)}function I(r){return"localhost"in d==!1&&(d.localhost=p(f.localhost.ipv4)),d.localhost(r)}function w(r){return"reserved"in d==!1&&(d.reserved=p(f.reserved.ipv4)),d.reserved(r)}function P(r){return"special"in d==!1&&(d.special=p(e(f.private.ipv4,f.localhost.ipv4,f.reserved.ipv4))),d.special(r)}var m=Object.freeze({__proto__:null,isInSubnet:function(r,e){return p(e)(r)},createChecker:p,isPrivate:h,isLocalhost:I,isReserved:w,isSpecial:P}),b=/\./,g=/^(.+:ffff:)(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?:%.+)?$/,y=/:/,A=/::/;function E(r){var e=r.match(g);if(!e||!u(e[2]))throw new Error("not a mapped IPv4 address: "+r);return e[2]}function S(r){if(!s(r))throw new Error("not a valid IPv6 address: "+r);if(b.test(r))return S(function(r){var e=r.match(g);if(!e||!u(e[2]))throw new Error("not a mapped IPv4 address: "+r);var n=e[1],t=e[2].split(b).map(function(r){return parseInt(r,10)});return""+n+((t[0]<<8)+t[1]).toString(16)+":"+((t[2]<<8)+t[3]).toString(16)}(r));var e=r.split(A),n=e[0],t=e[1],i=n&&n.split(y)||[],a=t&&t.split(y)||[],o=new Array(8-(i.length+a.length));return i.concat(o,a)}function _(r){if(Array.isArray(r)){var n=r.map(function(r){return x(r)});return function(r){var e=S(r);return n.some(function(r){return r(e)})}}var t=x(r);return function(r){var e=S(r);return t(e)}}function x(r){var e=r.split("/"),n=e[0],t=e[1],i=parseInt(t,10);if(!n||!Number.isInteger(i))throw new Error("not a valid IPv6 CIDR subnet: "+r);if(i<0||128<i)throw new Error("not a valid IPv6 prefix length: "+i+" (from "+r+")");var a=S(n);return function(r){for(var e=0;e<8;++e){var n=Math.min(i-16*e,16);if(n<=0)break;if((a[e]&&parseInt(a[e],16)||0)>>16-n!=(r[e]&&parseInt(r[e],16)||0)>>16-n)return!1}return!0}}var R={};function k(r){return"private"in R==!1&&(R.private=_(f.private.ipv6)),R.private(r)}function C(r){return"localhost"in R==!1&&(R.localhost=_(f.localhost.ipv6)),R.localhost(r)}function M(r){if("mapped"in R==!1&&(R.mapped=_("::ffff:0:0/96")),R.mapped(r)){var e=r.match(g);return Boolean(e&&u(e[2]))}return!1}function j(r){return"reserved"in R==!1&&(R.reserved=_(f.reserved.ipv6)),R.reserved(r)}function z(r){return"special"in R==!1&&(R.special=_(e(f.private.ipv6,f.localhost.ipv6,f.reserved.ipv6))),R.special(r)}var L=Object.freeze({__proto__:null,extractMappedIpv4:E,isInSubnet:function(r,e){return _(e)(r)},createChecker:_,isPrivate:k,isLocalhost:C,isIPv4MappedAddress:M,isReserved:j,isSpecial:z});function O(r,e){return $(e)(r)}function $(r){if(!Array.isArray(r))return $([r]);var e=r.reduce(function(r,e){return r[v(e.split("/")[0])].push(e),r},{0:[],4:[],6:[]});if(0!==e[0].length)throw new Error("some subnets are not valid IP addresses: "+e[0]);var n=p(e[4]),t=_(e[6]);return function(r){if(!v(r))throw new Error("not a valid IPv4 or IPv6 address: "+r);return s(r)&&M(r)?t(r)||n(E(r)):s(r)?t(r):n(r)}}var N=O;r.IPv4=m,r.IPv6=L,r.check=N,r.createChecker=$,r.isIP=v,r.isIPv4=u,r.isIPv4MappedAddress=function(r){return!!s(r)&&M(r)},r.isIPv6=s,r.isInSubnet=O,r.isLocalhost=function(r){return s(r)?M(r)?I(E(r)):C(r):I(r)},r.isPrivate=function(r){return s(r)?M(r)?h(E(r)):k(r):h(r)},r.isReserved=function(r){return s(r)?M(r)?w(E(r)):j(r):w(r)},r.isSpecial=function(r){return s(r)?M(r)?P(E(r)):z(r):P(r)},Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=isInSubnet.min.js.map
